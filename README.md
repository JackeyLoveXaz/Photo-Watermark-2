# 图片水印工具 (Photo-Watermark-2)

这是一个基于Java和JavaFX开发的图片水印标注工具，支持文本水印和图片水印，提供丰富的水印定制选项。

## 功能特性

### 文件处理
- **图片导入**
  - 支持单张图片拖拽或通过文件选择器导入
  - 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
  - 在界面上显示已导入图片的列表（缩略图和文件名）

- **支持格式**
  - 输入格式：JPEG, PNG, BMP, TIFF
  - 输出格式：用户可选择输出为 JPEG 或 PNG

- **图片导出**
  - 用户可指定输出文件夹
  - 防止覆盖原图的安全机制
  - 灵活的导出文件命名规则（保留原文件名、添加前缀/后缀）
  - 支持JPEG质量调节

### 水印类型
- **文本水印**
  - 自定义文本内容
  - 支持系统已安装字体选择
  - 可调节字体大小、粗体、斜体样式
  - 颜色选择器
  - 透明度调节（0-100%）

- **图片水印**
  - 支持从本地选择图片作为水印
  - 支持带透明通道的PNG图片
  - 可调节水印图片透明度

### 水印布局与样式
- **实时预览**：所有对水印的调整都在主预览窗口中实时显示效果
- **位置控制**
  - 九宫格布局预设位置（四角、正中心等）
  - 鼠标拖拽自由定位
- **旋转功能**：支持任意角度旋转水印

### 配置管理
- **水印模板**：保存、加载和管理水印设置模板
- **自动保存**：程序关闭时自动保存设置

## 系统要求

- Java Development Kit (JDK) 17 或更高版本
- Maven 3.6.0 或更高版本（用于构建项目）

## 安装与运行指南

### 方法一：使用批处理脚本（Windows系统）

1. 确保已安装JDK 17和Maven，并已配置环境变量
2. 下载项目源码
3. 双击运行 `run_app.bat` 文件
4. 脚本会自动构建项目并启动应用程序

### 方法二：使用Maven命令行（所有操作系统）

1. 确保已安装JDK 17和Maven，并已配置环境变量
2. 打开命令行终端，导航到项目根目录
3. 执行以下命令构建并运行项目：
   ```
   mvn clean javafx:run
   ```

### 方法三：手动构建并运行（所有操作系统）

1. 确保已安装JDK 17和Maven，并已配置环境变量
2. 打开命令行终端，导航到项目根目录
3. 执行以下命令构建项目：
   ```
   mvn clean package
   ```
4. 构建成功后，执行以下命令运行应用程序：
   ```
   java -jar target/Photo-Watermark-2-1.0-SNAPSHOT-jar-with-dependencies.jar
   ```

## 常见问题解决

1. **无法找到JDK或Maven**
   - 确保正确安装了JDK 17和Maven
   - 检查系统环境变量是否包含JDK和Maven的bin目录

2. **构建失败**
   - 尝试更新Maven依赖：`mvn clean install -U`
   - 检查网络连接是否正常

3. **运行时异常**
   - 确保使用的是JDK 17或更高版本
   - 检查JavaFX依赖是否正确加载

## 开发环境配置

如果您想参与项目开发，可以使用任何支持Java的IDE：

1. **IntelliJ IDEA**
   - 导入项目为Maven项目
   - 确保项目SDK设置为JDK 17

2. **Eclipse**
   - 导入项目为现有Maven项目
   - 配置JRE为JDK 17

3. **NetBeans**
   - 打开项目，选择项目根目录
   - 确保项目使用JDK 17
- Windows 或 MacOS 操作系统

## 安装和运行

### 方法一：使用批处理文件（Windows）

1. 确保已安装JDK 17和Maven
2. 双击运行 `run_app.bat` 文件
3. 批处理脚本会自动构建项目并运行应用程序

### 方法二：手动构建和运行

1. 打开命令行工具，进入项目目录
2. 执行以下命令构建项目：
   ```
   mvn clean package
   ```
3. 构建成功后，执行以下命令运行应用程序：
   ```
   java -jar target/Photo-Watermark-2-1.0-SNAPSHOT-jar-with-dependencies.jar
   ```

## 使用说明

### 导入图片
1. 点击"导入图片"按钮选择单张或多张图片
2. 点击"导入文件夹"按钮导入整个文件夹中的图片
3. 也可以直接将图片文件拖拽到左侧的图片列表区域

### 设置水印
1. 选择水印类型：文本水印或图片水印
2. 对于文本水印：
   - 输入水印文本
   - 选择字体、调整大小和样式
   - 选择颜色和透明度
3. 对于图片水印：
   - 点击"选择水印图片"按钮选择一张图片
   - 调整透明度
4. 调整水印位置：
   - 使用九宫格预设位置按钮快速定位
   - 或直接在预览窗口中拖拽水印到任意位置
5. 调整水印旋转角度

### 导出图片
1. 在"导出设置"标签页中，点击"浏览..."按钮选择输出文件夹
2. 设置文件命名规则（前缀、后缀、是否保留原文件名）
3. 选择输出格式（PNG或JPEG）
4. 对于JPEG格式，调整图片质量
5. 点击"导出图片"按钮开始导出

### 管理模板
1. 在"模板管理"标签页中，调整好水印设置后输入模板名称
2. 点击"保存模板"按钮保存当前设置
3. 要使用已保存的模板，从列表中选择一个模板，然后点击"加载模板"按钮
4. 要删除模板，从列表中选择一个模板，然后点击"删除模板"按钮

## 项目结构

```
Photo-Watermark-2/
├── src/
│   ├── main/java/com/photowatermark/  # Java源代码
│   └── main/resources/fxml/           # FXML布局文件
├── pom.xml                            # Maven项目配置文件
├── run_app.bat                        # Windows运行脚本
├── README.md                          # 项目说明文档
└── .gitignore                         # Git忽略文件配置
```

## 开发说明

该项目使用Maven进行依赖管理和构建。主要依赖包括：
- JavaFX 17.0.2（用于构建用户界面）

### 构建命令
```
mvn clean package
```

此命令会在`target`目录下生成可执行的JAR文件。

## 注意事项

- 为了防止意外覆盖原图，程序默认禁止导出到原图片所在的文件夹
- 程序关闭时会自动保存当前的水印设置和模板
- 加载模板时，如果模板中包含图片水印，需要确保水印图片文件仍然存在于原始路径

## License

[MIT License](LICENSE)
